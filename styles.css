:root{
  --bg:#e5e6e7; --fg:#0b0b0b; --muted:#6b6b6b; --border:#bcbec0;
  --card:#ffffff; --accent:#7d7f82; --invert-bg:#0b0b0b; --invert-fg:#e5e6e7;
  --nav-h:64px; /* JS updates this at runtime */
}

@font-face{
  font-family:'Black Ops One Local';
  src:url('assets/fonts/BlackOpsOne-Regular.woff2') format('woff2'),
      url('assets/fonts/BlackOpsOne-Regular.woff') format('woff');
  font-weight:400; font-style:normal; font-display:swap;
}

html, body {
  margin:0; padding:0;
  background:var(--bg); color:var(--fg);
  font-family:'Black Ops One Local', sans-serif;
  text-transform:uppercase; letter-spacing:1px;
}
*{box-sizing:border-box}
img{max-width:100%;display:block}
a{color:inherit;text-decoration:none}

/* ================= NAV ================= */
.nav{
  position:sticky; top:0; z-index:10;
  display:grid; grid-template-columns:auto 1fr auto; /* logo | links/hamburger | cart */
  align-items:center; gap:12px;
  padding:calc(12px + env(safe-area-inset-top,0)) 18px 12px 18px;
  background:#d3d4d6; border-bottom:1px solid var(--border);
}
.logo-link{display:flex; align-items:center; margin-right:auto;}
.logo{height:36px; width:auto; display:block;}

/* Desktop inline links */
.links{
  display:flex; justify-content:center; gap:8px; flex-wrap:wrap; margin:0 auto;
}

/* Cart pinned right */
.nav-cart{display:flex; align-items:center; gap:8px; font-weight:700; justify-self:end;}
.cart-icon{width:20px; height:20px; display:inline-block; filter:brightness(0); transition:transform .2s;}
.nav-cart:hover .cart-icon{transform:scale(1.1);}

/* Tabs */
.tab{
  border:2px solid #000; padding:6px 14px; margin:0 4px; transition:.15s;
  clip-path:polygon(10% 0%,90% 0%,100% 10%,100% 90%,90% 100%,10% 100%,0% 90%,0% 10%);
}
.tab:hover{background:var(--invert-bg); color:var(--invert-fg);}

/* ============ Hamburger ============ */
.nav-toggle{
  border:2px solid #000; background:transparent; border-radius:6px; margin-left:8px;
  min-width:44px; min-height:44px;
  display:none; /* hidden by default (desktop) */
  align-items:center; justify-content:center;
  grid-column:2; justify-self:center; /* center column on mobile */
}
.nav-toggle:focus{outline:2px solid #000; outline-offset:2px;}

.nav-toggle .bar{
  width:24px; height:2px; background:#000; border-radius:1px; display:block;
  transform-origin:center; transition:transform .2s ease, opacity .2s ease;
}
.nav-toggle .bar + .bar{ margin-top:5px; }

/* X animation */
.nav-toggle[aria-expanded="true"] .bar:nth-child(1){ transform: translateY(7px) rotate(45deg); }
.nav-toggle[aria-expanded="true"] .bar:nth-child(2){ opacity:0; }
.nav-toggle[aria-expanded="true"] .bar:nth-child(3){ transform: translateY(-7px) rotate(-45deg); }

.sr-only{position:absolute; left:-9999px;}

/* ============ Mobile menu (fixed overlay) ============ */
#main-menu{
  display:none; /* closed */
  position:fixed; top:var(--nav-h); left:0; right:0; z-index:9;
  background:#e1e2e4; border-bottom:1px solid var(--border);
  max-height:calc(100vh - var(--nav-h)); overflow-y:auto;
  padding:10px 18px 16px;
}
#main-menu.is-open{
  display:grid !important; grid-template-columns:1fr; /* force vertical stack */
}
#main-menu .tab{
  margin:0; width:100%; text-align:center; padding:12px 14px;
}

/* ===== Desktop vs Mobile visibility ===== */
@media (min-width:801px){
  .links{ display:flex !important; }
  .nav-toggle{ display:none !important; }
  #main-menu{ display:none !important; }
}
@media (max-width:800px){
  .links{ display:none !important; }          /* hide desktop tabs on mobile */
  .nav-toggle{ display:inline-flex !important; }
  body.no-scroll{ overflow:hidden; }          /* lock page scroll when menu open */
}

/* ============ Layout/content styles ============ */
.container{max-width:1100px; margin:0 auto; padding:24px;}
.hero{padding:36px 0; text-align:center;}
.grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:18px;}
.card{background:var(--card); border:2px solid var(--border); border-radius:8px; overflow:hidden; display:flex; flex-direction:column;}
.card .content{padding:12px; display:flex; flex-direction:column; gap:8px;}
.badge{font-size:12px; color:var(--muted); padding:4px 8px; border-radius:999px; border:1px solid var(--border); display:inline-block;}
.price{font-weight:800;}
.controls{display:grid; grid-template-columns:1fr 1fr; gap:8px;}
.controls label{font-size:12px; color:var(--muted);}
.select,.qty{padding:8px; border:2px solid var(--border); border-radius:6px; background:#fff; font:inherit; letter-spacing:inherit;}
.checkbox{display:flex; align-items:center; gap:8px;}
.btn{display:inline-block; padding:10px 14px; border:2px solid var(--fg); border-radius:6px; text-align:center;}
.btn:hover{background:var(--invert-bg); color:var(--invert-fg);}
.filters{display:flex; gap:8px; flex-wrap:wrap; margin:12px 0;}
.toggle{display:inline-flex; align-items:center; gap:8px; padding:8px 10px; border-radius:6px; border:2px solid var(--border); cursor:pointer; background:var(--card);}
.toggle.active{background:var(--accent); color:var(--invert-fg); border-color:var(--accent);}
.footer{text-align:center; padding:20px; color:var(--muted); border-top:1px solid var(--border); margin-top:36px;}
@media (max-width:800px){ .controls{grid-template-columns:1fr;} }

/* ============ Background ============ */
body{
  background-image:url("assets/diamond-plate.png");
  background-size:cover; background-position:center; background-repeat:no-repeat; background-attachment:scroll;
}
@media (max-width:800px){
  body{
    background-repeat:repeat;
    background-position:top center;
    background-size:800px auto; /* adjust to taste */
  }
}

/* ============ Headings (beveled) ============ */
h1, h2{
  display:inline-block;
  background:#d3d4d6; color:#000;
  padding:10px 18px; margin:12px 0;
  border:2px solid #000;
  clip-path:polygon(10% 0%,90% 0%,100% 10%,100% 90%,90% 100%,10% 100%,0% 90%,0% 10%);
}
/* --- FIX HAMBURGER STACKING + X --- */

/* ==== BULLETPROOF HAMBURGER/X (iOS-safe) ==== */
.nav-toggle{
  /* visible only on mobile via your media query */
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;

  /* make a fixed icon box (no layout shift) */
  width: 44px;          /* tap target */
  height: 44px;
  padding: 0;           /* important: no inner padding to offset bars */
  border: 2px solid #000;
  border-radius: 6px;
  background: transparent;
}

/* 3 bars drawn absolutely *inside the button* */
.nav-toggle .bar{
  position: absolute;
  left: 50%;
  width: 24px;
  height: 2px;
  background: #000;
  border-radius: 1px;
  transform: translateX(-50%);     /* center horizontally */
  transform-origin: center center;  /* pivot in the middle */
  transition: transform .18s ease, opacity .18s ease, top .18s ease;
  will-change: transform, opacity, top;
}

/* closed positions (even spacing) */
.nav-toggle .bar:nth-child(1){ top: 34%; }
.nav-toggle .bar:nth-child(2){ top: 50%; }
.nav-toggle .bar:nth-child(3){ top: 66%; }

/* OPEN → perfect X centered */
.nav-toggle[aria-expanded="true"] .bar{ top: 50%; }
.nav-toggle[aria-expanded="true"] .bar:nth-child(1){
  transform: translateX(-50%) rotate(45deg);
}
.nav-toggle[aria-expanded="true"] .bar:nth-child(2){
  opacity: 0;
}
.nav-toggle[aria-expanded="true"] .bar:nth-child(3){
  transform: translateX(-50%) rotate(-45deg);
}
/* ===== Hamburger: perfect spacing closed, perfect X open ===== */

/* Closed state: 3 evenly spaced lines via flex */
.nav-toggle{
  display: inline-flex;               /* shown on mobile via your MQ */
  align-items: center;
  justify-content: center;
  flex-direction: column;             /* stack bars */
  gap: 6px;                           /* even spacing */
  width: 44px; height: 44px;          /* tap target */
  padding: 0;                         /* avoid inner offsets */
  border: 2px solid #000;
  border-radius: 6px;
  background: transparent;
  position: relative;                 /* used when open */
}

.nav-toggle .bar{
  width: 24px;
  height: 2px;
  background: #000;
  border-radius: 1px;
  position: static;                   /* flex children in CLOSED state */
  transform: none;                    /* reset any prior transforms */
  opacity: 1;
  transition: transform .18s ease, opacity .18s ease;
}

/* Open state: overlap both visible bars at exact center and rotate */
.nav-toggle[aria-expanded="true"]{
  gap: 0;                             /* remove spacing while forming X */
}

.nav-toggle[aria-expanded="true"] .bar{
  position: absolute;                 /* overlap all bars */
  left: 50%;
  top: 50%;
  transform-origin: center center;
}

/* top bar */
.nav-toggle[aria-expanded="true"] .bar:nth-child(1){
  transform: translate(-50%, -50%) rotate(45deg);
}

/* middle bar disappears */
.nav-toggle[aria-expanded="true"] .bar:nth-child(2){
  opacity: 0;
  transform: translate(-50%, -50%);  /* keep centered while fading */
}

/* bottom bar */
.nav-toggle[aria-expanded="true"] .bar:nth-child(3){
  transform: translate(-50%, -50%) rotate(-45deg);
}
/* Image + hotspots */
.humvee-hotspots {
  margin: 1.5rem 0 2rem;
  display: grid;
  place-items: center;
}
.hotspot-container {
  position: relative;
  width: min(1100px, 95vw);
}
.humvee-img {
  width: 100%;
  height: auto;
  display: block;
  user-select: none;
  pointer-events: none; /* image itself won't intercept clicks */
}

/* Red circular hotspots */
.hotspot {
  position: absolute;
  width: clamp(20px, 3.5vw, 36px);
  height: clamp(20px, 3.5vw, 36px);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  background: rgba(220, 0, 0, 0.55);
  outline: 2px solid rgba(255, 255, 255, 0.7);
  box-shadow: 0 0 0 6px rgba(220,0,0,0.18);
  cursor: pointer;
  transition: transform 120ms ease, background 120ms ease, box-shadow 120ms ease;
}
.hotspot:hover,
.hotspot:focus-visible {
  background: rgba(220, 0, 0, 0.85);
  transform: translate(-50%, -50%) scale(1.08);
  box-shadow: 0 0 0 10px rgba(220,0,0,0.22);
}

/* Smooth anchor scrolling */
html { scroll-behavior: smooth; }

/* Flash highlight on target card */
@keyframes flash {
  0% { box-shadow: 0 0 0 0 rgba(255,0,0,0.0); }
  30% { box-shadow: 0 0 0 8px rgba(255,0,0,0.20); }
  60% { box-shadow: 0 0 0 0 rgba(255,0,0,0.0); }
  100% { box-shadow: 0 0 0 0 rgba(255,0,0,0.0); }
}
.product-card.flash {
  animation: flash 1500ms ease;
}
/* ================= NAV TITLE & POSITIONING (non-destructive overrides) ================= */

/* 1) Add a centered title on mobile, left on desktop.
   HTML needed (already discussed):
   <span class="nav-title">TACTICAL OFFROAD</span> inside .nav
*/
.nav-title{
  font-family:'Black Ops One Local', sans-serif;
  text-transform:uppercase;
  letter-spacing:1px;
  color:#000;
  white-space:nowrap;
  line-height:1;
  /* default desktop placement: we'll absolutely place it in the left area */
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  left:72px;               /* sits just to the right of the 36px logo + padding */
  font-size:18px;
}

/* Make .nav a positioned container so the absolute title anchors properly */
.nav{ position:sticky; }

/* Desktop: show logo, keep title on the left, links center (your existing layout). */
@media (min-width:801px){
  .logo-link{ display:flex; }
  .nav-title{
    display:inline-block;
    left:72px;             /* adjust if your logo width changes */
    font-size:18px;
  }
}

/* Mobile: hamburger left, title centered, cart right, logo hidden */
@media (max-width:800px){
  .nav{
    display:grid;
    grid-template-columns:44px 1fr auto; /* hamburger | title | cart */
    column-gap:8px;
  }
  .logo-link{ display:none !important; }  /* hide logo on mobile */
  .nav-toggle{
    grid-column:1;
    justify-self:start;
    display:inline-flex !important;
  }
  .nav-title{
    position:static;                /* let grid position it */
    grid-column:2;
    justify-self:center;
    align-self:center;
    transform:none;
    font-size:16px;
  }
  .nav-cart{ grid-column:3; justify-self:end; }
}

/* ================= BULLETPROOF HAMBURGER (spacing perfect, X perfect) ================= */
/* These override earlier hamburger rules without removing them */

.nav-toggle{
  width:44px; height:44px; padding:0;
  display:inline-flex; align-items:center; justify-content:center;
  border:2px solid #000; border-radius:6px; background:transparent;
  position:relative; /* anchor absolute bars on open */
  gap:6px;           /* closed spacing */
}

.nav-toggle .bar{
  width:24px; height:2px; background:#000; border-radius:1px;
  transition:transform .18s ease, opacity .18s ease;
}

/* Open state → overlap at center & rotate into X */
.nav-toggle[aria-expanded="true"]{ gap:0; }
.nav-toggle[aria-expanded="true"] .bar{
  position:absolute; left:50%; top:50%; transform-origin:center center;
}
.nav-toggle[aria-expanded="true"] .bar:nth-child(1){
  transform:translate(-50%, -50%) rotate(45deg);
}
.nav-toggle[aria-expanded="true"] .bar:nth-child(2){
  opacity:0; transform:translate(-50%, -50%);
}
.nav-toggle[aria-expanded="true"] .bar:nth-child(3){
  transform:translate(-50%, -50%) rotate(-45deg);
}

/* ================= HOTSPOT FLASH: cover both .card and .product-card ================= */
@keyframes flash {
  0% { box-shadow: 0 0 0 0 rgba(255,0,0,0.0); }
  30% { box-shadow: 0 0 0 8px rgba(255,0,0,0.20); }
  60% { box-shadow: 0 0 0 0 rgba(255,0,0,0.0); }
  100% { box-shadow: 0 0 0 0 rgba(255,0,0,0.0); }
}
.card.flash,
.product-card.flash{
  animation: flash 1500ms ease;
}
